## システム要件
- Next.js でサービスを構築する
- port3000でサーバーを建てる
- docker compose だけでインフラ構築を完結させ、ホストPCには言語依存のコマンドを依存せずcdなどのOSの標準的コマンドしか依存させない
- 外部パッケージが更新されるた日にdocker imageの再構築が必要な構造は避け、依存を増やすときはコンテナ内コマンドで実行し、upの都度.lockを反映する
### 構築上の制約など
- 外部ライブラリの制約は設けない
### 備考
- 将来的には用語・ドキュメントのベースとなるmarkdownを生成・編集できるページも拡張できるようにしたい


## サービス仕様
- ソースコードに配置した .md ファイルをmarkdownとして表示する
    - ホットリロード機能あり
- mdのうちh1をそのドキュメントのタイトルとして扱う
- 画面左側にメニューペインがあり、タブで機能選択
- 画面中央にコンテンツペイン
- 画面右側にサブペインがあり、タブで機能選択
    - TOCツリー
    - リンクページプレビュー
- 段落名以外の本文中でいずれかの用語mdのタイトルと一致するテキストがあれば、そのテキスト部分を特殊リンクAにする
- 段落名以外の本文中でいずれかのドキュメントmdのタイトルと一致するテキストがあれば、そのテキスト部分を特殊リンクBにする
    - "名無し"と一致した場合はリンクを設定しない
    - 同じタイトルが複数ある場合は最初の一致ドキュメントにリンクする

### 特殊リンク仕様
- ##で囲まれたテキストは用語として扱わず、囲み文字にあたる##を無視して表示する
- リンクさせる範囲はプロジェクトフォルダ(フォルダ構成仕様の項を参照)が共通するドキュメント間のみ
- リンクできるmdが複数ある場合、包含するパターンを優先する
  - "terms"と"terms_01","new_terms","new_terms_01"がある場合は"new_terms_01"としてリンクする
#### 特殊リンクA仕様
- マウスオーバーするとtooltipでその用語の概要・類義語・対比後を表示する
- tooltipのどこかをクリックすると、用語タブをアクティブにして、クリックした用語ページで更新する
#### 特殊リンクB仕様
- クリックしたドキュメントページでコンテンツペインを更新する
- サブペインのTOCツリータブに更新し、アクティブにする
- サブペインの用語タブを初期状態に戻す

### メニューペイン仕様
- docsをベースにドキュメントページタイトルの一覧を表示する
    - ページタイトルとしてh1を設定し、未設定の場合"名無し"として表示する
- フォルダ構造を再現したぶら下げ表示にする
- 一覧の各アイテムはリンクであり、クリックしたドキュメントに応じてコンテンツペインを更新する
- フォルダ構造を再現して表示する

### コンテンツペイン仕様
- 後述のドキュメントページ要件に基づいて表示する

### サブペイン仕様
- コンテンツペインのTOCツリーを表示する
- コンテンツページが更新された時点ではTOCツリータブがアクティブになる

## ページ仕様
### 用語ページ仕様
- termsフォルダ配下のmarkdownを再起的に読み込む
- markdownをパースした上で再構成したページ
- markdownのh2 summary,description,synonyms,antonym,sibling,parent,child をそれぞれ概要,詳細,類義語,対義語,兄弟,親,子として置き換えてh2表示する
#### 読み込まれるmarkdownのフォーマット
- h1はそのまま表示、未設定の場合"名無し"としてh1表示する
- h2としてsummary,description,synonyms,antonym,sibling,parent,childを持つ

### ドキュメントページ仕様
- docsフォルダ配下のmarkdownを再起的に読み込む
- h1としてタイトルを表示する
##### 読み込まれるmarkdownのフォーマット
- 特に制約なし。ページの制約以外は通常のmarkdownと同様にパースしてよい

## フォルダ構成仕様
### 構成具体例
- projects
    - {任意のフォルダ名}
        - terms
            - {以下の階層数とフォルダ名は任意}
        - docs
            - {以下の階層数とフォルダ名は任意}
### 補足
- projects直下の個別プロジェクトフォルダをプロジェクトフォルダと呼ぶ
- terms直下のファイルをtermsレベル1と呼び、以下フォルダ階層が深くなるにつれてtermsレベル2...3とレベルを上げて数える
- docs配下のファイルをdocsレベル1と予備、以下レベルもtermsと同様のルールで数える