# GitHub Pagesでのh1タグ重複問題修正

## 問題
GitHub Pagesではコンテンツペインのh1タグが重複している

## 原因
`ContentPane.tsx`で`<h1>{doc.title}</h1>`を表示し、さらに`doc.html`の中にもh1タグが含まれているため、h1タグが重複してしまっていました。

## 実装内容

### 1. マークダウンレベルでのh1タグ除去の改善
`lib/markdown-processor.ts`の`preprocessMarkdown`関数で、h1タグの除去処理の順序を調整：

```typescript
export function preprocessMarkdown(content: string): string {
  return content
    .replace(/\r\n/g, '\n')   // Windows改行を統一
    .replace(/\r/g, '\n')     // Mac改行を統一
    .replace(/^#\s+.+$/gm, '') // h1タグを除去（重複防止のため）
    .replace(/\n{3,}/g, '\n\n') // 3つ以上の連続改行を2つに統一
}
```

### 2. HTMLレベルでのh1タグ除去の追加
`processMarkdownFile`関数で、HTMLレベルでもh1タグを除去する処理を追加：

```typescript
let html = processedContent.toString()

// HTMLレベルでもh1タグを除去（重複防止のため）
html = html.replace(/<h1[^>]*>.*?<\/h1>/gi, '')
```

## 技術的な改善点

### 二重のh1タグ除去処理
1. **マークダウンレベル**: `^#\s+.+$`正規表現でh1タグの行を除去
2. **HTMLレベル**: `<h1[^>]*>.*?<\/h1>`正規表現でh1タグを除去

### 処理順序の最適化
- h1タグの除去を連続改行の統一処理より前に実行
- これにより、h1タグ除去後の空行も適切に処理される

### 正規表現の改善
- HTMLレベルでの除去では`gi`フラグを使用（大文字小文字を区別しない、グローバルマッチ）
- `[^>]*`でh1タグの属性も適切に処理

## 結果
✅ GitHub Pagesでh1タグの重複が解消されました
✅ マークダウンレベルとHTMLレベルの両方でh1タグを除去
✅ タイトルは`ContentPane`で表示される`<h1>{doc.title}</h1>`のみになります
✅ 処理順序を最適化して、より確実なh1タグ除去を実現

## 修正ファイル
1. `lib/markdown-processor.ts`: h1タグ除去処理の改善とHTMLレベルでの除去処理を追加
