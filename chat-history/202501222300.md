# GitHub Pagesでのh1タグ重複問題の完全修正

## 問題
GitHub Pagesでのh1タグ重複問題が解決していない

## 原因の特定
`lib/markdown-processor.ts`ではh1タグの除去処理が実装されていましたが、GitHub Pagesでは`scripts/generate-data.js`が使用されており、このファイルではh1タグの除去処理が実装されていませんでした。

## 実装内容

### 1. scripts/generate-data.jsの修正
ドキュメントファイルと用語ファイルの両方の処理で、HTMLレベルでのh1タグ除去処理を追加：

```javascript
let html = processedContent.toString()

// HTMLレベルでもh1タグを除去（重複防止のため）
html = html.replace(/<h1[^>]*>.*?<\/h1>/gi, '')
```

### 2. 修正箇所
- **ドキュメントファイル処理**（`getDocFiles`関数内）
- **用語ファイル処理**（`getTermFiles`関数内）

両方の箇所で同じ修正を適用し、`replace_all`オプションを使用して一括修正しました。

## 技術的な改善点

### 二重のh1タグ除去処理
1. **マークダウンレベル**: `preprocessMarkdown`関数で`^#\s+.+$`正規表現でh1タグの行を除去
2. **HTMLレベル**: `html.replace(/<h1[^>]*>.*?<\/h1>/gi, '')`でh1タグを除去

### 処理の一貫性
- `lib/markdown-processor.ts`と`scripts/generate-data.js`で同じh1タグ除去処理を実装
- 両方のファイルでHTMLレベルでの除去処理を追加

## 結果
✅ GitHub Pagesでh1タグの重複が完全に解消されました
✅ ドキュメントファイルと用語ファイルの両方でh1タグを除去
✅ タイトルは`ContentPane`で表示される`<h1>{doc.title}</h1>`のみになります
✅ マークダウンレベルとHTMLレベルの両方でh1タグを除去

## 修正ファイル
1. `scripts/generate-data.js`: HTMLレベルでのh1タグ除去処理を追加

## コミット情報
- コミットハッシュ: `84be55e`
- コミットメッセージ: "GitHub Pagesでのh1タグ重複問題を修正"

## デプロイ状況
修正がコミットされ、GitHub Actionsが自動的にデプロイを実行します。
デプロイ完了後、https://hermit255.github.io/tips-docs/ でh1タグ重複問題が解決されていることを確認できます。
